<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://unpkg.com/petite-vue"></script>
    <script src="https://unpkg.com/moment@2.29.1/moment.js"></script>
    <script type="module" src="scheduleFormatting.js"></script>
    <script type="module" src="vueScript.js"></script>
    <link rel="stylesheet" href="style.css" />
    <link
      href="https://fonts.googleapis.com/css?family=Niramit:300,regular,500,600"
      rel="stylesheet"
    />
    <title>LCHS Go</title>
  </head>
  <body class="body">
    <template id="period-information-template">
      <div class="progress-bar">
        <div class="circle"></div><!--                             percent max  min          min-->
        <div class="moving-time" v-bind:style="{ top: percentCompleted * (85 - 12) / 100 + 12 + '%' }"
          v-effect="$el.textContent = currentTime"></div>
        <!--12 - 85-->
        <div class="vertical-bar"></div>
        <div class="circle"></div>
      </div>
      <div class="period-information-content">
        <div class="start-end-time">{{ currentPeriod.getStart() }}</div>
        <div class="time-left">
          <div class="divider-bar" style="margin-bottom: 10px;"></div>
          <div class="time-left-group">
            <div class="details-name">{{ currentPeriod.getName() }}</div>
            <div class="time-left-text">
              <span class="time-left-number" @mounted="startTimer()" v-effect="$el.textContent = timeLeft"></span>
              {{ translate('MINUTES_LEFT') }}
            </div>
            <div class="time-left-percent">{{ percentCompletedText }}</div>
          </div>
          <div class="divider-bar" style="margin-top: 20px;"></div>
        </div>
        <div class="start-end-time">{{ currentPeriod.getEnd() }}</div>
      </div>
    </template>
    <div class="background"></div>
    <div class="app-container" v-scope>
      <div class="header">
        <div class="navigation">
          <div @click="switchToNowPage()" class="nav-button" v-bind:class="{'selected': currentPage == 'now'}">
            {{ translate("NOW") }}
          </div>
          <div @click="switchToCalendarPage()" class="nav-button" v-bind:class="{'selected': currentPage == 'calendar'}">
            {{ translate("CALENDAR") }}
          </div>
          <div @click="switchToSettingsPage()" class="nav-button" v-bind:class="{'selected': currentPage == 'settings'}">
            {{ translate("SETTINGS") }}
          </div>
        </div>
      </div>
      <div id="now-page" v-if="currentPage == 'now'">
        <div class="todays-schedule" v-effect="$el.textContent = todaysGreeting">
          Hello. Things are broken :)
        </div>
        <div class="schedule-container">
          <div class="period-information" v-scope="PeriodInformationComponent()"></div>
          <div class="all-periods">
            <div class="periods-header">
              <div class="period-name">
                <div class="period-header-text">{{ translate("PERIOD_NAME") }}</div>
              </div>
              <div class="period-header-text">{{ translate("PERIOD_START") }}</div>
              <div class="period-header-text">{{ translate("PERIOD_END") }}</div>
            </div>
            <div v-for="period in periodList" v-effect="currentPeriod">
              <div class="period" v-bind:class="{ current: period.isCurrent(), 'list-odd': getListCount() }" v-if="period.isCurrent() || !period.isPassing()">
                <div class="period-name">
                  <div class="period-details">{{ period.getName() }}</div>
                </div>
                <div class="period-details">{{ period.getStart() }}</div>
                <div class="period-details">{{ period.getEnd() }}</div>
              </div>
              <div class="period-details-small" v-scope="PeriodInformationComponent()" v-if="period.isCurrent()"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
